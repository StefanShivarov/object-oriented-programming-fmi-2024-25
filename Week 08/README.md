# 08. –ö–ª—é—á–æ–≤–∞ –¥—É–º–∞ `static`. –°—Ç–∞—Ç–∏—á–Ω–∏ —Ñ—É–Ω–∫—Ü–∏–∏. –°—Ç–∞—Ç–∏—á–Ω–∏ —á–ª–µ–Ω-–¥–∞–Ω–Ω–∏ –∏ —á–ª–µ–Ω-—Ñ—É–Ω–∫—Ü–∏–∏. –ò–∑–∫–ª—é—á–µ–Ω–∏—è (exceptions).

## Static
### –°—Ç–∞—Ç–∏—á–Ω–∏ –ª–æ–∫–∞–ª–Ω–∏ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏ 
- –¥—ä—Ä–∂–∏ —Å–µ –≤ –ø–∞–º–µ—Ç—Ç–∞ –Ω–∞ –≥–ª–æ–±–∞–ª–Ω–∏—Ç–µ/—Å—Ç–∞—Ç–∏—á–Ω–∏—Ç–µ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏
- –ø—Ä–æ–º–µ–Ω—è–º–µ –ø—Ä–æ–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ—Å—Ç—Ç–∞ –Ω–∞ –ª–æ–∫–∞–ª–Ω–∞—Ç–∞ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞ –æ—Ç automatic (—Ç.–µ. –¥–æ –∫—Ä–∞—è –Ω–∞ scope-–∞) –Ω–∞ static (–ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞—Ç–∞ —Å–µ —Å—ä–∑–¥–∞–≤–∞ –≤ –Ω–∞—á–∞–ª–æ—Ç–æ –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞—Ç–∞ –∏ —Å–µ —É–Ω–∏—â–æ–∂–∞–≤–∞ –≤ –∫—Ä–∞—è –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞—Ç–∞, —Ç–æ—á–Ω–æ –∫–∞—Ç–æ –≥–ª–æ–±–∞–ª–Ω–∏—Ç–µ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏) 
- –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–∞ —Å–µ —Å–∞–º–æ –≤–µ–¥–Ω—ä–∂ - –ø—Ä–∏ –ø—ä—Ä–≤–æ—Ç–æ –≤–ª–∏–∑–∞–Ω–µ –≤ —Å—ä–æ—Ç–≤–µ—Ç–Ω–∏—è scope –∏ –∑–∞–ø–∞–∑–≤–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç—Ç–∞ —Å–∏ –¥–æ—Ä–∏ —Å–ª–µ–¥ –∫–∞—Ç–æ –∏–∑–ª–µ–∑–µ –æ—Ç scope-–∞

```cpp
int increment() {
    static int value = 0;
    ++value;
    return value;
}

int main() {
    std::cout << increment() << std::endl; //1
    std::cout << increment() << std::endl; //2
    std::cout << increment() << std::endl; //3
}
```

### –°—Ç–∞—Ç–∏—á–Ω–∏ —Ñ—É–Ω–∫—Ü–∏–∏
- –æ–±–≤—ä—Ä–∑–≤–∞ —Å–µ —Å –µ–¥–Ω–∞ –∫–æ–º–ø–∏–ª–∞—Ü–∏–æ–Ω–Ω–∞ –µ–¥–∏–Ω–∏—Ü–∞ –∏ –Ω–µ –º–æ–∂–µ –¥–∞ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞ –æ—Ç –¥—Ä—É–≥–∏ —Ñ–∞–π–ª–æ–≤–µ
- —Ç–æ–µ—Å—Ç –Ω–µ –º–æ–∂–µ–º –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞–º–µ —Ç–∞–∑–∏ —Ñ—É–Ω–∫—Ü–∏—è –≤ –¥—Ä—É–≥ .cpp —Ñ–∞–π–ª
- –ø—Ä–∏–º–µ—Ä [—Ç—É–∫](https://github.com/StefanShivarov/object-oriented-programming-fmi-2024-25/tree/main/Week%2008/Seminar%2008/Examples/Static/Static%20function)

### –°—Ç–∞—Ç–∏—á–Ω–∞ —á–ª–µ–Ω-–¥–∞–Ω–Ω–∞ –Ω–∞ –∫–ª–∞—Å
- –Ω–µ –µ –æ–±–≤—ä—Ä–∑–∞–Ω–∞ —Å –∫–æ–Ω–∫—Ä–µ—Ç–µ–Ω –æ–±–µ–∫—Ç, –∞ —Å —Ü–µ–ª–∏—è –∫–ª–∞—Å
- –≤—Å–∏—á–∫–∏ –æ–±–µ–∫—Ç–∏ –æ—Ç –∫–ª–∞—Å–∞ –∏–∑–ø–æ–ª–∑–≤–∞—Ç –µ–¥–Ω–∞ –∏ —Å—ä—â–∞ –∏–Ω—Å—Ç–∞–Ω—Ü–∏—è
- –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–∞ —Å–µ –∏–∑–≤—ä–Ω –∫–ª–∞—Å–∞

### –°—Ç–∞—Ç–∏—á–Ω–∞ —á–ª–µ–Ω-—Ñ—É–Ω–∫—Ü–∏—è –Ω–∞ –∫–ª–∞—Å
- –Ω–µ –µ –æ–±–≤—ä—Ä–∑–∞–Ω–∞ —Å –∫–æ–Ω–∫—Ä–µ—Ç–µ–Ω –æ–±–µ–∫—Ç, –∞ —Å —Ü–µ–ª–∏—è –∫–ª–∞—Å
- –∏–∑–ø–æ–ª–∑–≤–∞ —Å–µ –∑–∞ –¥–æ—Å—Ç—ä–ø–≤–∞–Ω–µ –Ω–∞ —Å—Ç–∞—Ç–∏—á–Ω–∏—Ç–µ —á–ª–µ–Ω-–¥–∞–Ω–Ω–∏
- –Ω—è–º–∞ —É–∫–∞–∑–∞—Ç–µ–ª **this**
- –Ω–µ –µ –Ω—É–∂–µ–Ω –æ–±–µ–∫—Ç, –∑–∞ –¥–∞ —Å–µ –¥–æ—Å—Ç—ä–ø–∏

```cpp
class Test {
private:
    static int x; 
public:
    static void f() { 
        x *= 2; // –º–æ–∂–µ –¥–∞ –¥–æ—Å—Ç—ä–ø–≤–∞ —Å–∞–º–æ —Å—Ç–∞—Ç–∏—á–Ω–∏—Ç–µ —á–ª–µ–Ω-–¥–∞–Ω–Ω–∏
    }
};

int Test::x = 0; // —Ç—Ä—è–±–≤–∞ –¥–∞ —è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–∞–º–µ –∏–∑–≤—ä–Ω –∫–ª–∞—Å–∞

int main() {
    Test::f(); // –Ω–µ –Ω–∏ —Ç—Ä—è–±–≤–∞ –æ–±–µ–∫—Ç
}
```

–ó–∞ –¥–∞ –±—ä–¥–µ –ø–æ-–ø—Ä–µ–≥–ª–µ–¥–Ω–æ –∏ –æ—á–µ–≤–∏–¥–Ω–æ, –∫–æ–≥–∞—Ç–æ –ø–æ–ª–∑–≤–∞–º–µ static —á–ª–µ–Ω-–¥–∞–Ω–Ω–∏ –∏–ª–∏ static —á–ª–µ–Ω-—Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ –µ–¥–∏–Ω –∫–ª–∞—Å, –≤–∏–Ω–∞–≥–∏ —â–µ –≥–∏ –¥–æ—Å—Ç—ä–ø–≤–∞–º–µ —á—Ä–µ–∑ –∏–º–µ—Ç–æ –Ω–∞ –∫–ª–∞—Å–∞. 
 
## üìä –û–±–æ–±—â–∞–≤–∞—â–∞ —Ç–∞–±–ª–∏—Ü–∞: –î–æ—Å—Ç—ä–ø –≤ —Ä–∞–º–∫–∏—Ç–µ –Ω–∞ –∫–ª–∞—Å

| –ö–∞–∫–≤–æ –∏—Å–∫–∞—à –¥–∞ –¥–æ—Å—Ç—ä–ø–∏—à ‚û°Ô∏è / –ö–æ–π –≥–æ –¥–æ—Å—Ç—ä–ø–≤–∞ ‚¨áÔ∏è | üß± –ù–µ—Å—Ç–∞—Ç–∏—á–Ω–∞ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞ | üß± –°—Ç–∞—Ç–∏—á–Ω–∞ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞ | üîß –ù–µ—Å—Ç–∞—Ç–∏—á–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è | üîß –°—Ç–∞—Ç–∏—á–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è |
|-----------------------------------------------|---------------------------|--------------------------|-------------------------|------------------------|
| **–ù–µ—Å—Ç–∞—Ç–∏—á–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è** (`void f()`)            | ‚úÖ –î–∞                    | ‚úÖ –î–∞                   | ‚úÖ –î–∞                  | ‚úÖ –î–∞                |
| **–°—Ç–∞—Ç–∏—á–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è** (`static void f()`)       | ‚ùå –ù–µ                    | ‚úÖ –î–∞                   | ‚ùå –ù–µ                  | ‚úÖ –î–∞                |

---

## Exception handling

- –∫–æ–≥–∞—Ç–æ –ø–∏—à–µ–º –∫–æ–¥ –∑–∞ –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ, –µ –≤–∞–∂–Ω–æ –¥–∞ –æ–±—Ä–∞–±–æ—Ç–≤–∞–º–µ –≥—Ä–µ—à–∫–∏—Ç–µ, –∫–æ–∏—Ç–æ –≤—ä–∑–Ω–∏–∫–≤–∞—Ç
- –µ–¥–∏–Ω –æ—Ç –Ω–∞–π-—Ä–∞–∑–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—Ç–µ –Ω–∞—á–∏–Ω–∏ –∑–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–Ω–∏ –≥—Ä–µ—à–∫–∏ –µ —á—Ä–µ–∑ –≤—Ä—ä—â–∞–Ω–µ –Ω–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∏ –∫–æ–¥–æ–≤–µ, –Ω–æ –Ω–µ –≤–∏–Ω–∞–≥–∏ –∏–º–∞ –ø–æ–¥—Ö–æ–¥—è—â–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç, –∫–æ—è—Ç–æ –º–æ–∂–µ–º –¥–∞ –≤—ä—Ä–Ω–µ–º 
- –¥—Ä—É–≥ –≤–∞—Ä–∏–∞–Ω—Ç –µ –¥–∞ —Å–µ –ø–æ–¥–∞–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—ä—Ä –ø–æ —Ä–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è, –Ω–æ —Ç–æ–≥–∞–≤–∞ —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞ —Å—Ç–∞–≤–∞ –Ω–µ—É–¥–æ–±–Ω–∞ –∑–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ
- —Ç—Ä—è–±–≤–∞ –Ω–µ–ø—Ä–µ–∫—ä—Å–Ω–∞—Ç–æ –¥–∞ —Å–µ –ø—Ä–æ–≤–µ—Ä—è–≤–∞ –∫–∞–∫–≤–∞ –µ –≤—ä—Ä–Ω–∞—Ç–∞—Ç–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç
- –æ–±—Ä–∞–±–æ—Ç–∫–∞—Ç–∞ –Ω–∞ –∏–∑–∫–ª—é—á–µ–Ω–∏—è (exception handling) –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—è –º–µ—Ö–∞–Ω–∏–∑—ä–º –∑–∞ –æ—Ç–¥–µ–ª—è–Ω–µ –Ω–∞ –ª–æ–≥–∏–∫–∞—Ç–∞ –∑–∞ –æ–±—Ä–∞–±–æ—Ç–≤–∞–Ω–µ –Ω–∞ –≥—Ä–µ—à–∫–∏ –æ—Ç –ª–æ–≥–∏–∫–∞—Ç–∞ –Ω–∞ –æ—Å—Ç–∞–Ω–∞–ª–∏—è –∫–æ–¥
- `exception` - —Å–∏–≥–Ω–∞–ª, —á–µ –µ –≤—ä–∑–Ω–∏–∫–Ω–∞–ª –Ω—è–∫–∞–∫—ä–≤ –ø—Ä–æ–±–ª–µ–º
- —Å–∏–Ω—Ç–∞–∫—Å–∏—Å: `throw <object>`

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –≥—Ä–µ—à–∫–∏
```cpp
void f() {
    throw 3;
}

int main() {
    try {
        f(); // –ø—Ä–æ–±–ª–µ–º–µ–Ω –∫–æ–¥
        ...
    }
    catch (int n) {
        ... // –æ–±—Ä–∞–±–æ—Ç–≤–∞–Ω–µ –Ω–∞ —Ö–≤—ä—Ä–ª–µ–Ω int
    }
    catch (const A& a) {
        ... // –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ –ø–æ —Ä–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è
        // –æ–±—Ä–∞–±–æ—Ç–≤–∞–Ω–µ –Ω–∞ —Ö–≤—ä—Ä–ª–µ–Ω–∞ –∏–Ω—Å—Ç–∞–Ω—Ü–∏—è –Ω–∞ –∫–ª–∞—Å A
    }
    catch (...) {

    }
}
```
- –≤ `try` –±–ª–æ–∫–∞ —Å–µ –Ω–∞–º–∏—Ä–∞ –ø—Ä–æ–±–ª–µ–º–Ω–∏—è—Ç –∫–æ–¥
- –∞–∫–æ —Å–µ —Ö–≤—ä—Ä–ª–∏ –≥—Ä–µ—à–∫–∞, –æ—Å—Ç–∞–Ω–∞–ª–∞—Ç–∞ —á–∞—Å—Ç –æ—Ç try –±–ª–æ–∫–∞ –Ω–µ —Å–µ –∏–∑–ø—ä–ª–Ω—è–≤–∞
- –≤ `catch` –±–ª–æ–∫–æ–≤–µ—Ç–µ –≥—Ä–µ—à–∫–∞—Ç–∞ —Å–µ –æ–±—Ä–∞–±–æ—Ç–≤–∞
- –º–æ–∂–µ –¥–∞ –∏–º–∞ –Ω—è–∫–æ–ª–∫–æ catch –±–ª–æ–∫–∞, –≤–ª–∏–∑–∞–º–µ –≤ —Ç–æ–∑–∏, –∫–æ–π—Ç–æ –ø—Ä–∏–µ–º–∞ –∫–∞—Ç–æ –ø–∞—Ä–∞–º–µ—Ç—ä—Ä –æ–±–µ–∫—Ç–∞, –∫–æ–π—Ç–æ –µ —Ö–≤—ä—Ä–ª–µ–Ω (–∞–∫–æ —Å–µ —Ö–≤–∞–Ω–µ –≥—Ä–µ—à–∫–∞—Ç–∞, –ø—Ä–æ–≤–µ—Ä–∫–∞—Ç–∞ –Ω–∞–¥–æ–ª—É —Å–ø–∏—Ä–∞)
- `catch (...)` —Ö–≤–∞—â–∞ –≤—Å–∏—á–∫–æ, –∞–∫–æ –¥–æ –º–æ–º–µ–Ω—Ç–∞ –Ω–µ –µ —Ö–≤–∞–Ω–∞—Ç–æ - —Å–ª–∞–≥–∞ —Å–µ –Ω–∞–∫—Ä–∞—è

### Stack unwinding
- –ø—Ä–∏ —Ö–≤—ä—Ä–ª—è–Ω–µ –Ω–∞ –≥—Ä–µ—à–∫–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ—Ç–æ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞ —Å–µ –ø—Ä–µ–∫—Ä–∞—Ç—è–≤–∞
- –ø—Ä–æ–≥—Ä–∞–º–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä—è–≤–∞ –¥–∞–ª–∏ —Ç–µ–∫—É—â–∞—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –∏–ª–∏ –Ω—è–∫–æ—è –æ—Ç –∏–∑–≤–∏–∫–≤–∞—â–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞–≥–æ—Ä–µ –ø–æ —Å—Ç–µ–∫–∞ –º–æ–∂–µ –¥–∞ —Å–µ —Å–ø—Ä–∞–≤–∏ —Å –∏–∑–∫–ª—é—á–µ–Ω–∏–µ—Ç–æ (–∏–º–∞ try-catch –±–ª–æ–∫)
- –∞–∫–æ –±—ä–¥–µ –Ω–∞–º–µ—Ä–µ–Ω —Å—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∞—â –±–ª–æ–∫ –∑–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –∏–∑–∫–ª—é—á–µ–Ω–∏–µ, –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ—Ç–æ —Å–µ –ø—Ä–µ—Å–∫–∞—á–∞ –æ—Ç –º–æ–º–µ–Ω—Ç–∞, –≤ –∫–æ–π—Ç–æ –µ —Ö–≤—ä—Ä–ª–µ–Ω–æ –∏–∑–∫–ª—é—á–µ–Ω–∏–µ—Ç–æ, –¥–æ –Ω–∞—á–∞–ª–æ—Ç–æ –Ω–∞ —Å—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∞—â–∏—è –±–ª–æ–∫ –∑–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞
- —Ç–æ–≤–∞ –∏–∑–∏—Å–∫–≤–∞ **stack unwinding** (–ø—Ä–µ–º–∞—Ö–≤–∞–Ω–µ –Ω–∞ —Ç–µ–∫—É—â–∞—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç —Å—Ç–µ–∫–∞ –Ω–∞ –ø–æ–≤–∏–∫–≤–∞–Ω–∏—è—Ç–∞) —Ç–æ–ª–∫–æ–≤–∞ –ø—ä—Ç–∏, –∫–æ–ª–∫–æ—Ç–æ –µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, –∑–∞ –¥–∞ –º–æ–∂–µ —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞, –æ–±—Ä–∞–±–æ—Ç–≤–∞—â–∞ –∏–∑–∫–ª—é—á–µ–Ω–∏–µ—Ç–æ, –¥–∞ –±—ä–¥–µ –Ω–∞–π-–≥–æ—Ä–µ –≤ call stack-–∞
- –∫–æ–≥–∞—Ç–æ —Ç–µ–∫—É—â–∞—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —Å–µ –ø—Ä–µ–º–∞—Ö–Ω–µ –æ—Ç call stack-–∞, –≤—Å–∏—á–∫–∏ —É—Å–ø–µ—à–Ω–æ —Å—ä–∑–¥–∞–¥–µ–Ω–∏ –ª–æ–∫–∞–ª–Ω–∏ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏ —Å–µ —É–Ω–∏—â–æ–∂–∞–≤–∞—Ç –∫–∞–∫—Ç–æ –æ–±–∏–∫–Ω–æ–≤–µ–Ω–æ, –Ω–æ –Ω–µ —Å–µ –≤—Ä—ä—â–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç

```cpp
void g() {
    X x;
    throw 3;
}

void f() {
    A obj1;
    B obj2;
    g();
    C obj3;
}

int main() {
    try {
        f(); // ~X() ~B() ~A()
    }
    catch (int n) {

    }
    catch (...) {

    }    
}
```
- –∞–∫–æ –Ω–µ –º–æ–∂–µ –¥–∞ –±—ä–¥–µ –Ω–∞–º–µ—Ä–µ–Ω –±–ª–æ–∫ –∑–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –∏–∑–∫–ª—é—á–µ–Ω–∏–µ –∑–∞ –¥–∞–¥–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è, —Å–µ –∏–∑–≤–∏–∫–≤–∞ `std::terminate()` –∏ –ø—Ä–æ–≥—Ä–∞–º–∞—Ç–∞ —Å–µ –ø—Ä–µ–∫—Ä–∞—Ç—è–≤–∞
- call stack-—ä—Ç –º–æ–∂–µ –¥–∞ –±—ä–¥–µ –∏–ª–∏ –¥–∞ –Ω–µ –±—ä–¥–µ —Ä–∞–∑–≥—ä–Ω–∞—Ç, —Ç.–µ. –ª–æ–∫–∞–ª–Ω–∏—Ç–µ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏ –º–æ–∂–µ –¥–∞ **–Ω–µ –±—ä–¥–∞—Ç —É–Ω–∏—â–æ–∂–µ–Ω–∏**

### Exceptions vs. assert
- assert - —Å–∏—Å—Ç–µ–º–Ω–∏/–Ω–∞—à–∏ –≥—Ä–µ—à–∫–∏
- assert(bool) - –∞–∫–æ –µ true, —â–µ —Å–ø—Ä–µ –ø—Ä–æ–≥—Ä–∞–º–∞—Ç–∞
- –≤ release build —Å–µ –ø—Ä–æ–ø—É—Å–∫–∞
- exception - –∏–¥–µ—è—Ç–∞ –µ –¥–∞ —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä–∞–º–µ –Ω–∞ –≤—ä–Ω—à–Ω–∏—è —Å–≤—è—Ç, —á–µ –Ω–µ—â–æ —Å–µ –µ —Å–ª—É—á–∏–ª–æ –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–æ

### –í–∏–¥–æ–≤–µ –≥—Ä–µ—à–∫–∏
![](https://flylib.com/books/2/253/1/html/2/images/16fig11.jpg)
- `std::bad_alloc` - –≥—Ä–µ—à–∫–∞ –ø—Ä–∏ –∑–∞–¥–µ–ª—è–Ω–µ –Ω–∞ –ø–∞–º–µ—Ç
- `std::bad_cast` - –≥—Ä–µ—à–∫–∞ –ø—Ä–∏ –∫–∞—Å—Ç–≤–∞–Ω–µ
- `std::runtime_error` - –≥—Ä–µ—à–∫–∞ –ø–æ –≤—Ä–µ–º–µ –Ω–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ
- `std::logic_error` - –≥—Ä–µ—à–∫–∞, –∫–æ—è—Ç–æ –Ω–∞—Ä—É—à–∞–≤–∞ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–∏—Ç–µ –Ω–∞ –∫–ª–∞—Å–∞ (—É—Å–ª–æ–≤–∏—è—Ç–∞, –∫–æ–∏—Ç–æ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏) –∏ –º–æ–∂–µ –¥–∞ –±—ä–¥–µ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–µ–Ω–∞
- –∫–æ–≥–∞—Ç–æ –ø–æ–¥—Ä–µ–∂–¥–∞–º–µ catch –±–ª–æ–∫–æ–≤–µ—Ç–µ, –∫–ª–∞—Å–æ–≤–µ—Ç–µ –ø–æ-–Ω–∞–≥–æ—Ä–µ –≤ –π–µ—Ä–∞—Ä—Ö–∏—è—Ç–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–∞ –ø–æ-–Ω–∞–¥–æ–ª—É, –∑–∞—â–æ—Ç–æ —Å–∞ –ø–æ-–æ–±—â–∏ –∏ —Ö–≤–∞—â–∞—Ç –ø–æ–≤–µ—á–µ –≤–∏–¥–æ–≤–µ –≥—Ä–µ—à–∫–∏

```cpp

void f(int n) {
    if (n < 0) {
        throw std::invalid_argument("Number should be positive!");
    }
}

int main() {
    try {
        f();
    }
    catch (std::invalid_argument& e) {
        std::cout << e.what() << std::endl; // —Å—ä–æ–±—â–µ–Ω–∏–µ—Ç–æ –Ω–∞ –≥—Ä–µ—à–∫–∞—Ç–∞
    }
    catch (std::logic_error& e) {

    }
    catch (std::exception& e) {

    }    
}
```
### –ß–∞—Å—Ç–Ω–∏ —Å–ª—É—á–∞–∏
- —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ –≤–Ω–∏–º–∞–≤–∞ –ø—Ä–∏ —Ö–≤—ä—Ä–ª—è–Ω–µ—Ç–æ –Ω–∞ –∏–∑–∫–ª—é—á–µ–Ω–∏—è –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∏—Ç–µ - –ø—Ä–∏ —Ö–≤—ä—Ä–ª—è–Ω–µ –Ω–∞ –∏–∑–∫–ª—é—á–µ–Ω–∏–µ —Å–µ –∏–∑—á–∏—Å—Ç–≤–∞ –ø–∞–º–µ—Ç—Ç–∞ —Å–∞–º–æ –∑–∞ —É—Å–ø–µ—à–Ω–æ —Å—ä–∑–¥–∞–¥–µ–Ω–∏—Ç–µ –æ–±–µ–∫—Ç–∏
- —Ç–æ–µ—Å—Ç –∞–∫–æ —Å–º–µ –∑–∞–¥–µ–ª–∏–ª–∏ –Ω—è–∫–∞–∫–≤–∞ –ø–∞–º–µ—Ç —Å new –∏ —Å–µ —Ö–≤—ä—Ä–ª–∏ –≥—Ä–µ—à–∫–∞ –≤ constructor —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–∏ —è –∏–∑—Ç—Ä–∏–µ–º!

```cpp
class X {
    A a;
    B b;
    char* first_name;
    char* last_name;

public:
    X(...) : a(...), b(...) {
        first_name = new char[...]; // if it doesn't allocate => doesn't matter
        strcpy(...);
        try {
            last_name = new char[...]; // if it fails to allocate => we have to delete first_name
            strcpy(...);
        }
        catch(std::std::bad_alloc& ex) {
            delete[] first_name;
        }
    }
}


```
- –∞–∫–æ –≤ `last_name = new char[...];` —Å–µ —Ö–≤—ä—Ä–ª–∏ `bad_alloc`—â–µ —Å–µ –∏–∑–≤–∏–∫–∞—Ç –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–∏—Ç–µ –Ω–∞ `a` –∏ `b`, –Ω–æ –Ω–µ –∏ –Ω–∞ `x`, —Ç—ä–π –∫–∞—Ç–æ –Ω–µ –µ —É—Å–ø–µ—à–Ω–æ —Å—ä–∑–¥–∞–¥–µ–Ω, fist_name –Ω—è–º–∞ –¥–∞ —Å–µ –∏–∑—Ç—Ä–∏–µ –∏ —â–µ –∏–º–∞ –æ—Ç–µ—á–∫–∞ –Ω–∞ –ø–∞–º–µ—Ç
- –ü—Ä–∏ stack unwinding —Å–µ —É–Ω–∏—â–æ–∂–∞–≤–∞—Ç –æ–±–µ–∫—Ç–∏—Ç–µ –æ—Ç –≤—Å—è–∫–∞ —Å—Ç–µ–∫ —Ä–∞–º–∫–∞, –∫–æ–µ—Ç–æ –≤–æ–¥–∏ –¥–æ –∏–∑–≤–∏–∫–≤–∞–Ω–µ –Ω–∞ –¥–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏. –í —Å–ª—É—á–∞–π, —á–µ –¥–∞–¥–µ–¥–Ω –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä —Ö–≤—ä—Ä–ª–∏ –≥—Ä–µ—à–∫–∞ –ø–æ –≤—Ä–µ–º–µ –Ω–∞ stack unwiding(–∫–æ–π—Ç–æ stack unwiding —Å–µ —Å–ª—É—á–≤–∞ –ø–æ–Ω–µ–∂–µ –≤–µ—á–µ –µ —Ö–≤—ä—Ä–ª–µ–Ω–∞ –≥—Ä–µ—à–∫–∞), —Ç–æ —â–µ —Å–µ –ø–æ—è–≤–∏ –≤—Ç–æ—Ä–æ –∏–∑–∫–ª—é—á–µ–Ω–∏–µ.
- –≤ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–∏—Ç–µ –ù–ò–ö–û–ì–ê –ù–ï —Ö–≤—ä—Ä–ª—è–º–µ –≥—Ä–µ—à–∫–∏ - –º–æ–∂–µ –¥–∞ —Å–µ –ø–æ–¥–¥—ä—Ä–∂–∞ —Å–∞–º–æ –µ–¥–Ω–æ –∏–∑–∫–ª—é—á–µ–Ω–∏–µ –µ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏ –∞–∫–æ —Å–µ —Ö–≤—ä—Ä–ª–∏ –Ω–æ–≤–æ, —Å–µ –≤–∏–∫–∞ `std::terminate()` –∏ –ø—Ä–æ–≥—Ä–∞–º–∞—Ç–∞ —Å–µ –ø—Ä–µ–∫—Ä–∞—Ç—è–≤–∞

### Noexcept:
`noexcept` –≤ C++ –µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ç–æ—Ä, –∫–æ–π—Ç–æ –∫–∞–∑–≤–∞, —á–µ –¥–∞–¥–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –Ω—è–º–∞ –¥–∞ —Ö–≤—ä—Ä–ª—è –∏–∑–∫–ª—é—á–µ–Ω–∏—è.
–ö–∞–∫–≤–æ –ø—Ä–∞–≤–∏ noexcept? –ö–æ–≥–∞—Ç–æ –Ω–∞–ø–∏—à–µ—à:
```cpp
void printWeekday() noexcept;
```
–¢–æ–≤–∞ –∫–∞–∑–≤–∞ –Ω–∞ –∫–æ–º–ø–∏–ª–∞—Ç–æ—Ä–∞:
 - –¢–∞–∑–∏ —Ñ—É–Ω–∫—Ü–∏—è –ù–Ø–ú–ê –¥–∞ —Ö–≤—ä—Ä–ª—è throw ‚Äì –Ω–∏—Ç–æ –¥–∏—Ä–µ–∫—Ç–Ω–æ, –Ω–∏—Ç–æ –∏–Ω–¥–∏—Ä–µ–∫—Ç–Ω–æ.
 - ‚ùó –ê–∫–æ —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞ –≤—Å–µ –ø–∞–∫ —Ö–≤—ä—Ä–ª–∏ –∏–∑–∫–ª—é—á–µ–Ω–∏–µ –≤—ä–ø—Ä–µ–∫–∏ `noexcept`, –∫–∞–∫–≤–æ —Å—Ç–∞–≤–∞?
üëâ –ü—Ä–æ–≥—Ä–∞–º–∞—Ç–∞ —â–µ —Å–µ –ø—Ä–µ–∫—Ä–∞—Ç–∏ –º–æ–º–µ–Ω—Ç–∞–ª–Ω–æ —Å `std::terminate().`

üìå **–ü—Ä–∏–º–µ—Ä:**
–ö–æ–≥–∞—Ç–æ –∫–æ–º–ø–∏–ª–∞—Ç–æ—Ä—ä—Ç –≤–∏–∂–¥–∞:
```cpp
void myFunc() noexcept {
    ............
    throw std::runtime_error("Boom!"); // ‚ùå
    ........
}
```
**–¢–æ–π –ø—Ä–∏–µ–º–∞:**
"–¢–∞–∑–∏ —Ñ—É–Ω–∫—Ü–∏—è –Ω–∏–∫–æ–≥–∞ –Ω—è–º–∞ –¥–∞ —Ö–≤—ä—Ä–ª—è –∏–∑–∫–ª—é—á–µ–Ω–∏—è!"
- –ê–∫–æ –≤—Å–µ –ø–∞–∫ –≥–æ –Ω–∞–ø—Ä–∞–≤–∏ ‚Äì —Ç–æ–≤–∞ –Ω–∞—Ä—É—à–∞–≤–∞ –¥–æ–≥–æ–≤–æ—Ä–∞ ‚Üí –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –∫—ä–¥–µ —è –≤–∏–∫–∞—à, –¥–∏—Ä–µ–∫—Ç–Ω–æ —Å–µ –∏–∑–≤–∏–∫–≤–∞ `std::terminate()`.

#### noexcept –∏ std::terminate ‚Äî –¢–∞–±–ª–∏—Ü–∞ –Ω–∞ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

| –°–∏—Ç—É–∞—Ü–∏—è                                                                 | –í–∏–∫–∞ –ª–∏ —Å–µ `std::terminate()`? | –û–±—è—Å–Ω–µ–Ω–∏–µ                                                                 |
|--------------------------------------------------------------------------|:------------------------------:|---------------------------------------------------------------------------|
| üîπ `noexcept` —Ñ—É–Ω–∫—Ü–∏—è —Ö–≤—ä—Ä–ª—è `throw`, –Ω–æ **–Ω—è–º–∞ `try-catch` –≤—ä—Ç—Ä–µ**     | ‚úÖ **–î–∞**                      | –ù–∞—Ä—É—à–∞–≤–∞ `noexcept` ‚Üí –∫–æ–º–ø–∏–ª–∞—Ç–æ—Ä—ä—Ç –∏–∑–≤–∏–∫–≤–∞ `std::terminate()`             |
| üîπ `noexcept` —Ñ—É–Ω–∫—Ü–∏—è —Ö–≤—ä—Ä–ª—è `throw`, –Ω–æ **–∏–º–∞ `try-catch` –≤—ä—Ç—Ä–µ**      | ‚ùå **–ù–µ**                      | –ò–∑–∫–ª—é—á–µ–Ω–∏–µ—Ç–æ —Å–µ —Ö–≤–∞—â–∞ –≤—ä—Ç—Ä–µ –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞ ‚Üí `noexcept` –Ω–µ —Å–µ –Ω–∞—Ä—É—à–∞–≤–∞       |
| üîπ `noexcept` —Ñ—É–Ω–∫—Ü–∏—è –≤–∏–∫–∞ –¥—Ä—É–≥–∞ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—è—Ç–æ —Ö–≤—ä—Ä–ª—è `throw`, **–∏ –Ω–µ –≥–æ —Ö–≤–∞—â–∞** | ‚úÖ **–î–∞**                      | –í—ä–Ω—à–Ω–æ—Ç–æ `noexcept` —Å–µ –Ω–∞—Ä—É—à–∞–≤–∞ –æ—Ç –≤—ä—Ç—Ä–µ—à–Ω–æ `throw` ‚Üí `std::terminate()`  |
| üîπ `noexcept` —Ñ—É–Ω–∫—Ü–∏—è –≤–∏–∫–∞ –¥—Ä—É–≥–∞ `throw`-—Ñ—É–Ω–∫—Ü–∏—è, –Ω–æ **–∏–º–∞ `try-catch` –≤—ä—Ç—Ä–µ** | ‚ùå **–ù–µ**                      | –ò–∑–∫–ª—é—á–µ–Ω–∏–µ—Ç–æ –µ —Ö–≤–∞–Ω–∞—Ç–æ –≤—ä—Ç—Ä–µ ‚Üí –±–µ–∑–æ–ø–∞—Å–Ω–æ                                   |
| üîπ –ù–æ—Ä–º–∞–ª–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è (–±–µ–∑ `noexcept`) —Ö–≤—ä—Ä–ª—è `throw`                     | ‚ùå **–ù–µ**                      | –ú–æ–∂–µ –¥–∞ —Å–µ —Ö–≤–∞–Ω–µ –∏–ª–∏ –¥–∞ —Å–µ –ø—Ä–µ–Ω–µ—Å–µ –Ω–∞–≥–æ—Ä–µ ‚Üí –Ω–æ—Ä–º–∞–ª–Ω–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ             |

---

**–ü—Ä–∏–º–µ—Ä —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ö–≤–∞—â–∞–Ω–µ (`noexcept` + try/catch):**

```cpp
void f() noexcept {
    try {
        throw std::runtime_error("safe");
    } catch (...) {
        std::cerr << "Caught inside noexcept\n";
    }
}
```

**–ó–∞—â–æ —Å–µ –ø–æ–ª–∑–≤–∞ noexcept?**
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –æ—Ç –∫–æ–º–ø–∏–ª–∞—Ç–æ—Ä–∞
- –£—Ç–æ—á–Ω–µ–Ω–∏–µ: —Ç–∞–∑–∏ —Ñ—É–Ω–∫—Ü–∏—è –Ω–∞–∏—Å—Ç–∏–Ω–∞ –µ "–±–µ–∑–æ–ø–∞—Å–Ω–∞" (–Ω–µ —Ö–≤—ä—Ä–ª—è)
- –ù–∞–π-—á–µ—Å—Ç–æ –ø—Ä–∏: move-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∏, –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–∏, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏ —à–∞–±–ª–æ–Ω–∏ –∏ —Ç.–Ω.

### [Exception guarantees](https://en.cppreference.com/w/cpp/language/exceptions#Exception_safety)
–ö–æ–≥–∞—Ç–æ —Å–µ —Ö–≤—ä—Ä–ª–∏ –≥—Ä–µ—à–∫–∞ –µ –¥–æ–±—Ä–µ –¥–∞ –∑–Ω–∞–µ–º –∫–∞–∫–≤–æ —Å–µ –µ —Å–ª—É—á–∏–ª–æ —Å—ä—Å —Å—ä—Å—Ç–æ—è–Ω–∏–µ—Ç–æ –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞—Ç–∞(–∏–ª–∏ –æ–±–µ–∫—Ç–∞ —Ö–≤—ä—Ä–ª–∏–ª –≥—Ä–µ—à–∫–∞—Ç–∞). –ò–º–∞ 4 –¥–æ–±—Ä–µ –ø–æ–∑–Ω–∞—Ç–∏ Exception guarantees, –∫–æ–∏—Ç–æ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞—Ç –∑–∞ –∏–Ω–¥–∏–∫–∞—Ü–∏—è –∫–∞–∫–≤–æ —â–µ —Å—Ç–∞–Ω–µ —Å—ä—Å —Å—ä—Å—Ç–æ—è–Ω–∏–µ—Ç–æ –ø—Ä–∏ –≥—Ä–µ—à–∫–∞. (–ò–ª–∏ –ø–æ –¥—Ä—É–≥ –Ω–∞—á–∏–Ω –∫–∞–∑–∞–Ω–æ –∫–∞–∫–≤–æ –µ —Å—Ç–∞–Ω–∞–ª–æ —Å –æ–±–µ–∫—Ç–∞, —Å–ª–µ–¥ –∫–∞—Ç–æ –µ —Ö–≤—ä—Ä–ª–∏–ª –≥—Ä–µ—à–∫–∞ –æ—Ç —á–ª–µ–Ω —Ñ—É–Ω–∫—Ü–∏—è).

- Nothrow (nofail) guarantee - —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞ –Ω–∏–∫–æ–≥–∞ –Ω—è–º–∞ –¥–∞ —Ö–≤—ä—Ä–ª–∏ –≥—Ä–µ—à–∫–∞
- Strong exception guarantee - –∞–∫–æ —Ñ—É–Ω–∫—Ü–∏—è —Ö–≤—ä—Ä–ª–∏ –≥—Ä–µ—à–∫–∞, —Å—ä—Å—Ç–æ—è–Ω–∏–µ—Ç–æ –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞—Ç–∞ —â–µ –µ —Å—ä—â–æ—Ç–æ, –∫–∞–∫—Ç–æ –ø—Ä–µ–¥–∏ –¥–∞ —Å–µ –∏–∑–≤–∏–∫–∞ —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞.
- Basic exception guarantee - –≤—ä–∑–º–æ–∂–Ω–æ –µ –¥–∞ —Å–µ —Ö–≤—ä—Ä–ª–∏ –∏–∑–∫–ª—é—á–µ–Ω–∏–µ –∏ –æ–±–µ–∫—Ç—ä—Ç —â–µ –º–æ–∂–µ –¥–∞ —Å–µ –ø–æ–ª–∑–≤–∞ (—Ç–æ–µ—Å—Ç –µ –≤—ä–≤ –≤–∞–ª–∏–¥–Ω–æ –∑–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ —Å—ä—Å—Ç–æ—è–Ω–∏–µ), –Ω–æ –Ω–µ —Å–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–∞, —á–µ —â–µ –±—ä–¥–µ –≤ —Å—ä—â–æ—Ç–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ, –≤ –∫–æ–µ—Ç–æ –µ –±–∏–ª–æ –ø—Ä–µ–¥–∏ –∏–∑–≤–∏–∫–≤–∞–Ω–µ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞
- No exception guarantee - –Ω—è–º–∞ –≥–∞—Ä–∞–Ω—Ü–∏—è –∑–∞ –Ω–∏—â–æ



